(function(e){function l(o,l){var c=this;c.$container=o,c.searchInput=null,c.init=function(t){c.settings=e.extend({},u,t),c.privateSettings=e.extend({},f,t),c.render(),c.searchInput=c.$container.find(c.privateSettings.elSearchInput),c.searchInput.attr("id",c.$container.attr("id")+"-input"),c.searchBtn=c.$container.find(c.privateSettings.elSearchBtn),c.loadStylesheets(),c.loadJavaScripts(),c.loadParameters(),c.searchInput.keypress(c.onKeypress),c.searchBtn.click(c.searchRedirect)},c.loadParameters=function(){c.privateSettings.autocompleteURL+="&count="+c.settings.count},c.createAutocompletePlugin=function(){c.searchInput.data("create-autocomplete")||c.searchInput.attr("autocomplete","off"),c.searchAutocomplete=new e.hmsautocomplete(c.searchInput,{url:c.privateSettings.autocompleteURL,onComplete:c.onComplete,templateType:"table"}),c.searchAutocomplete.create()},c.render=function(){t=t.replace("{PH}",c.settings.placeholder),t=t.replace("{BT}",c.settings.buttonText),t=t.replace("{AE}",c.settings.autoEnter),c.$container.append(t)},c.onKeypress=function(e){e&&e.currentTarget&&e.keyCode==13&&c.searchRedirect()},c.onComplete=function(t,s,o){o=o||!1;if(s.docs&&s.docs.length>0){var u=n;u=u.replace("{ID}",c.searchInput.attr("id"));var a=e(u),f=a.find("tbody");o&&(f.append(e(i)),c.searchInput.focus());for(var l=0;l<s.docs.length;++l){var h=e(r);h.attr("data-value",s.docs[l].match);var p=h.find(".js-rmx-autocomplete-link");p.html(s.docs[l].match),f.append(h)}t.render(a)}},c.searchRedirect=function(){var t=c.searchInput.val();e.ajax({url:c.privateSettings.seourlinfo,type:"get",contentType:"application/json; charset=utf-8",dataType:"jsonp",data:{search:t},success:function(t){if(t&&t.Success==1)if(t.SEOUrls!=null&&t.SEOUrls.length>1){var n=[];for(var r=0;r<t.SEOUrls.length;++r){var i=e(t.SEOUrls[r]);if(i){var s=i.html();n.push({match:s})}}c.$container.find(".js-autocomplete-question").show(),c.onComplete(c.searchAutocomplete,{docs:n},!0)}else{var o=a+t.SEOUrl;if(c.settings._blank){var u=window.open(o,"_blank");u?u.focus():window.location.href=o}else window.location.href=o}}})},c.loadStylesheets=function(){if(!s){var t=e("<link/>",{rel:"stylesheet",type:"text/css",href:c.privateSettings.stylesheetspluginUrl});t.appendTo("head"),t=e("<link/>",{rel:"stylesheet",type:"text/css",href:c.privateSettings.stylesheetsUrl}),t.appendTo("head"),s=!0}},c.loadJavaScripts=function(){e.ajax({url:c.privateSettings.pluginUrl,dataType:"script",success:function(){c.createAutocompletePlugin()}})},c.init(l)}var t='<div class="js-autocomplete-container js-autocomplete rmx-widget-search"><div class="rmx-widget-field"><input class="js-rmx-search-input rmx-widget-input" type="text" name="search" data-outo-enter-event="{AE}" placeholder="{PH}" /><div class="js-autocomplete-position"></div></div><div class="rmx-widget-submit"><button class="js-rmx-search-btn rmx-widget-button" type="submit" name="dosearch"><span class="hide-mobile rmx-widget-btntext">{BT}</span><span class="show-mobile rmx-widget-icon"></span>';"</button></div></div>";var n='<div id="js-autocomplete-{ID}" class="js-autocomplete autocomplete rmx-widget-autocomplete"><table cellspacing="0" cellpadding="0" width="100%" class="autocomplete-list"><tbody></tbody></div>',r='<tr class="autocomplete-item autocomplete-item__rmx-widget"><td class="autocomplete-suggestion"><span class="js-rmx-autocomplete-link autocomplete-link" href="javascript:void(0)"></span></td><td class="autocomplete-count"></td>';"</tr>";var i='<tr><td><span class="js-autocomplete-question autocomplete-question__rmx-widget">Do you mean?</span></td></tr>',s=!1,o="remaxseach",u={_blank:!0,count:10,autoEnter:!0,buttonText:"Let's Go!",placeholder:"City and State, Address or Zip Code"},a="http://remax.com",f={elSearchInput:".js-rmx-search-input",elSearchBtn:".js-rmx-search-btn",remaxHost:a,pluginUrl:a+"/resources_resp/js/app/ui-modules/searchwidget/ui/jquery.hmsautocomplete.js",stylesheetspluginUrl:a+"/resources_resp/js/app/ui-modules/searchwidget/ui/jquery-hmsautocomplete.css",stylesheetsUrl:a+"/resources_resp/js/app/ui-modules/searchwidget/rmx-styles.css",autocompleteURL:a+"/api/autosuggestionsjsonp/?",seourlinfo:a+"/api/seourlinfojsonp/?"};e.fn[o]=function(t){return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new l(e(this),t))})}})(jQuery)